â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           TRAVEL STUDIO API INTEGRATION ARCHITECTURE                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                           WhatsApp User
                                 â”‚
                                 â”‚ sends message
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   WhatsApp Webhook     â”‚
                    â”‚    (AiSensy/Twilio)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ POST /webhook
                                â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   FastAPI Server       â”‚
                    â”‚   (server.py)          â”‚
                    â”‚                        â”‚
                    â”‚  Routes:               â”‚
                    â”‚  â€¢ /webhook            â”‚
                    â”‚  â€¢ /process-async      â”‚
                    â”‚  â€¢ /travel-studio/*    â”‚â—„â”€â”€â”€â”€â”€ Direct API access
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚                         â”‚
                   â–¼                         â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  Agent Service   â”‚      â”‚ Travel Studio API    â”‚
       â”‚ (AI Processing)  â”‚      â”‚  Endpoints           â”‚
       â”‚                  â”‚      â”‚                      â”‚
       â”‚ â€¢ Process msg    â”‚      â”‚ GET /bookings        â”‚
       â”‚ â€¢ Generate reply â”‚      â”‚ POST /bookings       â”‚
       â”‚ â€¢ Call tools     â”‚      â”‚ GET /rooms/available â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ needs booking info
                â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ Travel Studio Service    â”‚
       â”‚ (travel_studio_service.py)â”‚
       â”‚                          â”‚
       â”‚ Methods:                 â”‚
       â”‚ â€¢ get_bookings()         â”‚
       â”‚ â€¢ create_booking()       â”‚
       â”‚ â€¢ get_available_rooms()  â”‚
       â”‚ â€¢ get_guest_bookings()   â”‚
       â”‚ â€¢ cancel_booking()       â”‚
       â”‚ â€¢ confirm_booking()      â”‚
       â”‚ â€¢ get_hotel_profile()    â”‚
       â”‚ â€¢ get_reports()          â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ HTTP requests with Bearer token
                â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  Travel Studio Backend   â”‚
       â”‚  (External API)          â”‚
       â”‚                          â”‚
       â”‚  https://travel-studio-  â”‚
       â”‚  backend...              â”‚
       â”‚                          â”‚
       â”‚  Authentication:         â”‚
       â”‚  Bearer Token (JWT)      â”‚
       â”‚  Hotel ID: aec93eab...   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                        EXAMPLE USER FLOW                                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. User: "Do you have rooms available Dec 15-17?"
   â†“
2. WhatsApp â†’ Webhook â†’ Server â†’ Agent Service
   â†“
3. Agent Service â†’ Travel Studio Service
   â†“
4. Travel Studio Service â†’ Travel Studio API
   GET /api/hotel/rooms/available?check_in=2025-12-15&check_out=2025-12-17
   â†“
5. API Response â†’ Travel Studio Service â†’ Agent Service
   â†“
6. Agent generates reply: "Yes! We have 3 rooms available..."
   â†“
7. WhatsApp sends reply to user

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                          FILES STRUCTURE                                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

gyde-ai-whatsapp/
â”œâ”€â”€ .env                              â† API credentials configured
â”œâ”€â”€ server.py                         â† Added Travel Studio endpoints
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ __init__.py                   â† Exports TravelStudioService
â”‚   â”œâ”€â”€ whatsapp_service.py          â† WhatsApp integration
â”‚   â”œâ”€â”€ agent_service.py             â† AI agent logic
â”‚   â”œâ”€â”€ tool_service.py              â† Tool calling
â”‚   â””â”€â”€ travel_studio_service.py     â† NEW: Travel Studio API wrapper
â”œâ”€â”€ test_travel_studio.py            â† NEW: Comprehensive tests
â”œâ”€â”€ test_travel_api.py               â† NEW: Simple endpoint tests
â”œâ”€â”€ TRAVEL_STUDIO_INTEGRATION.md     â† NEW: Detailed usage guide
â”œâ”€â”€ INTEGRATION_SUMMARY.md           â† NEW: Complete overview
â”œâ”€â”€ QUICK_START.md                   â† NEW: Quick reference
â””â”€â”€ INTEGRATION_DIAGRAM.txt          â† This file

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         CONFIGURATION                                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Environment Variables (.env):

TRAVEL_STUDIO_API_URL=
  "https://travel-studio-backend-e2bkc2e0a8e4e3hy.centralindia-01.azurewebsites.net"

TRAVEL_STUDIO_BEARER_TOKEN=
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJob3RlbElkIjoiYWVjOTNlYW..."
  
Token Details:
  - Hotel ID: aec93eab-a17b-4bec-b44a-08030dead54f
  - Role: hotel
  - Expires: February 8, 2025

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                      INTEGRATION STATUS                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… COMPLETED:
  â€¢ Service class created with all methods
  â€¢ Configuration added to .env
  â€¢ Server endpoints implemented
  â€¢ Error handling added
  â€¢ Logging configured
  â€¢ Documentation written
  â€¢ Test scripts created

âš ï¸  PENDING:
  â€¢ API endpoint verification (returns 404)
  â€¢ Need Travel Studio API documentation
  â€¢ Update endpoint paths once known

ğŸ”„ NEXT STEPS:
  1. Get API documentation from Travel Studio team
  2. Update endpoint paths in travel_studio_service.py
  3. Run tests: python test_travel_api.py
  4. Integrate with WhatsApp agent

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    AVAILABLE API METHODS                                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Booking Management:
  â€¢ get_bookings(status, start_date, end_date)
  â€¢ get_booking_by_id(booking_id)
  â€¢ create_booking(guest_name, email, phone, dates, ...)
  â€¢ update_booking(booking_id, **fields)
  â€¢ cancel_booking(booking_id, reason)
  â€¢ confirm_booking(booking_id)

Room Management:
  â€¢ get_available_rooms(check_in, check_out, room_type)
  â€¢ get_room_types()

Guest Management:
  â€¢ get_guest_by_phone(phone)
  â€¢ get_guest_bookings(phone)

Analytics:
  â€¢ get_occupancy_report(start_date, end_date)
  â€¢ get_revenue_report(start_date, end_date)

Hotel Profile:
  â€¢ get_hotel_profile()
  â€¢ update_hotel_profile(**fields)

Notifications:
  â€¢ send_booking_confirmation(booking_id)

